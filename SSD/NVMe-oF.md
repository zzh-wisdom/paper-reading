# NVMe™ over Fabrics (NVMe-oF™)

如今，NVMe 经常在服务器中用于将闪存驱动器作为直接连接存储连接到 PCIe 总线，从而为服务器提供一种更有效地使用闪存介质的方式。然而，以这种方式使用 NVMe 的挑战是**闪存设备无法被除它所连接的服务器之外的任何其他系统访问**——这可能会造成可以从额外的闪存中受益的服务器未被充分利用SSD的情况。

## Fabric

NVMe 协议不仅限于简单的连接闪存驱动器，它还可以用作网络协议。当在这种情况下使用时，**“Fabric”可以实现任意元素之间的连接**。**这是为了将其与网络区分开来，网络可能会限制附加元素之间可能的连接。**

## NVMe-oF – Fibre Channel vs. Ethernet

但是，当涉及到网络时，您可能想知道该协议是否仅限于光纤或以太网？好消息是它可以在传统的光纤通道交换机和 IP 交换机上运行。大多数现代光纤通道交换机已经更新了固件，并且能够支持当今的 NVMe-oF 协议。受多种标准支持的以太网为 IT 基础设施提供了更多选择。

**对于已经投资于 FC 基础设施的环境，将 NVMe-oF 与光纤通道 (FC) 结合使用应该是直截了当的**。FC 专为存储而设计，可以同时支持传统 SCSI 流量和 NVMe 流量。由于大多数组织会将 NVMe-oF 集成到现有数据中心，因此当前对这两种协议的支持使他们能够以适合他们的速度进行转换。

**通过以太网的 NVMe-oF 通常依赖于远程直接内存访问 (RDMA)**，它使同一网络上的两台计算机能够在不涉及处理器的情况下交换内存内容。虽然 RDMA 不是专门的存储协议，但它可以在存储网络中使用 RoCE（基于融合以太网的 RDMA）和 iWARP（互联网广域 RDMA 协议）等协议启用。以太网 NVMe-oF 实施的新成员是 NVMe/TCP，它使客户能够在现有的以太网基础设施上运行 NVMe-oF，利用传统或非 RDMA 基础设施，同时可能(只)会产生小的性能损失。

直到 NVMe/TCP 发布之前，NVMe/FC 对很多企业来说都具有明显的优势。它能够同时运行 SCSI 和 NVMe，并且还具有自动发现功能，可以更轻松地向架构中添加新服务器或存储。FC 面临的挑战在企业之外，它不像 NFS 和 iSCSI 等基于以太网的用例那样流行。RoCE 和 iWARP 正在更多的实施中出现，提供这些解决方案的供应商声称，**由于 RDMA 的直接内存访问能力，其性能优于 FC**。

NVMe/TCP 虽然迟到了，但确实有一些优势，并且似乎非常适合没有传统 FC 基础架构且不需要 RDMA 的组织。

## 参考

1. <https://blog.westerndigital.com/nvme-of-explained/>
